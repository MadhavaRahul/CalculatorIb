<div class="calci-container shadow">
<!-- header  -->
    <div class="d-flex justify-content-between align-items-center mb-3 bg-light header-bar">
    <h3 class="fw-bold">Calculator</h3>
    <div>
      <i class="bi bi-clock-history me-3"
      (click)="toggleHistory()"
      style="cursor:pointer"></i>

      <i class="bi bi-gear"
      (click)="toggleSettings()"
      style="cursor:pointer"></i>
    </div>
    </div>

    <!-- tab-->
<button id="basic" class="btn btn-light py-1 w-50 mb-3 fw-semibold shadow-sm disabled">Basic</button>

<!-- Display -->
 <div class="display mb-3 bg-light ">{{display}}</div>
<!-- buttons -->
 <div class="row g-2">
    <div class="col-3"><button class="btn btn-light w-100" (click)="clear()">C</button></div>
    <div class="col-3"><button class="btn btn-light w-100" (click)="toggleSign()">±</button></div>
    <div class="col-3"><button class="btn btn-light w-100" (click)="percent()">%</button></div>
    <div class="col-3"><button class="btn btn-operator w-100" (click)="setOperator('/')">÷</button></div>
    <div class="col-3" *ngFor="let n of [7,8,9]"><button class="btn btn-number w-100" (click)="inputNumber(n)">{{n}}</button></div>
    <div class="col-3"><button class="btn btn-operator w-100" (click)="setOperator('*')">x</button></div>
    <div class="col-3" *ngFor="let n of [4,5,6]"><button class="btn btn-number w-100" (click)="inputNumber(n)">{{n}}</button></div>
    <div class="col-3"><button class="btn btn-operator w-100" (click)="setOperator('-')">-</button></div>
    <div class="col-3" *ngFor="let n of [1,2,3]"><button class="btn btn-number w-100" (click)="inputNumber(n)">{{n}}</button></div>
    <div class="col-3"><button class="btn btn-operator w-100" (click)="setOperator('+')">+</button></div>
    <div class="col-3"><button class="btn btn-number w-100" (click)="inputNumber('0')">0</button></div>
    <div class="col-3"><button class="btn btn-number w-100" (click)="inputDecimal()">.</button></div>
    <div class="col-3"><button class="btn btn-light w-100" (click)="backspace()">⌫</button></div>
    <div class="col-3"><button class="btn btn-equal w-100" (click)="equals()">=</button></div>
 </div>

</div>

<!-- History Drawer -->
<div class="history-drawer" [class.open]="showHistory">

  <div class="history-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">History</h5>
    <button class="btn-close" (click)="toggleHistory()"></button>
  </div>

  <div class="history-body mt-3">

    <div *ngFor="let item of history" class="history-card mb-2">
      <div class="expression">{{ item.expression }}</div>
      <div class="result fw-bold">= {{ item.result }}</div>
      <div class="time text-muted small">{{ item.time }}</div>
    </div>

    <div *ngIf="history.length === 0" class="text-muted text-center">
      No history yet
    </div>

    <!-- <button *ngIf="history.length"
      class="btn btn-sm btn-outline-danger w-100 mt-3"
      (click)="clearHistory()">
      Clear History
    </button> -->

  </div>
</div>


<!-- Settings Backdrop -->
<div class="settings-backdrop" *ngIf="showSettings">

  <div class="settings-modal">

    <div class="settings-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Settings</h5>
      <button class="btn-close" (click)="toggleSettings()"></button>
    </div>

    <div class="settings-body mt-3">

      <div class="settings-item d-flex justify-content-between align-items-center">
        <div>
          <strong>Clear History</strong>
          <p class="text-muted mb-0">
            {{ history.length }} calculations saved
          </p>
        </div>

        <button class="btn btn-danger btn-sm"
                (click)="clearHistory()">
          Clear
        </button>
      </div>

      <!-- <div class="settings-info mt-3">
        <strong>Data Storage</strong>
        <p class="mb-0">
          All calculations are stored locally in your browser using
          <code>localStorage</code>. Clearing history will permanently
          remove them.
        </p>
      </div> -->

    </div>

  </div>
</div>

